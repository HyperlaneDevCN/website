"use strict";(self.webpackChunkhyperlane_dev_cn_website=self.webpackChunkhyperlane_dev_cn_website||[]).push([[3312],{57929:(e,n,a)=>{a.d(n,{sZ:()=>l});var t=a(92293),s=a(96506),r=a(96540);const o="abacus works",i=[];function d(e){return void 0===e&&(e=!1),function(e,n){return void 0===e&&(e=!1),void 0===n&&(n=!0),Object.values(t.F).filter((a=>{const t=a.deployer?.name.trim().toLowerCase()===o,r=!!a.isTestnet===e,d=!n||!!s.y[a.name]?.mailbox,l=i.includes(a.name);return t&&r&&d&&!l}))}(e).map((e=>e.name))}function l(e){return void 0===e&&(e=!1),(0,r.useMemo)((()=>d(e)),[e])}},65032:(e,n,a)=>{a.d(n,{on:()=>l,Ay:()=>d});var t,s=a(57929);!function(e){e.Ethereum="ethereum",e.Sealevel="sealevel",e.Cosmos="cosmos"}(t||(t={}));t.Ethereum,t.Sealevel,t.Cosmos;var r;!function(e){e[e.NONE=0]="NONE",e[e.PROCESSED=1]="PROCESSED"}(r||(r={}));var o=a(92293),i=a(74848);function d(e){let{chains:n,label:a,onChange:t,chain:s}=e;return(0,i.jsxs)("div",{children:[a,":",(0,i.jsxs)("div",{className:"dropdown dropdown--hoverable margin-left--xs",children:[(0,i.jsx)("button",{className:"button button--secondary navbar__link",children:s}),(0,i.jsx)("ul",{className:"dropdown__menu",children:n.map((e=>(0,i.jsx)("li",{children:(0,i.jsx)("a",{className:"dropdown__link",href:`#${a}=${e}`,onClick:()=>t(e),children:e})},e)))})]})]})}function l(e){return d({chains:(0,s.sZ)(!0).filter((e=>o.F[e].protocol===t.Ethereum)),...e})}},72891:(e,n,a)=>{a.d(n,{A:()=>h,W:()=>u});var t=a(96540),s=a(65032),r=a(92293),o=a(96506),i=a(58069),d=a(79329),l=a(65537),c=a(57929),m=a(74848);function h(e){const n=(0,c.sZ)(!0),[a,i]=(0,t.useState)(n[0]),[d,l]=(0,t.useState)(n[1]),[h,u]=(0,t.useState)("Hello, world"),p=r.F[a].domainId,f=r.F[d].domainId,x=o.y[a]?.mailbox,_=o.y[a]?.merkleTreeHook,g=o.y[a]?.testRecipient,b=(void 0===j&&(j=32),(y=g).startsWith("0x")&&(y=y.slice(2)),"0x"+y.padStart(2*j,"0"));var y,j;return(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"container row",children:[(0,m.jsx)("div",{className:"margin-horiz--sm",children:(0,m.jsx)(s.on,{label:"origin",chain:a,onChange:i})}),(0,m.jsx)("div",{className:"margin-horiz--sm",children:(0,m.jsx)(s.on,{label:"destination",chain:d,onChange:l})}),(0,m.jsxs)("div",{className:"margin-horiz--sm",children:["body:","\t",(0,m.jsx)("input",{defaultValue:h,onChange:e=>u(e.target.value)})]})]}),e.exampleCode({mailbox:x,merkleTreeHook:_,originChain:a,originDomain:p,destinationChain:d,destinationDomain:f,recipient:g,paddedRecipient:b,body:h,value:"0.01"})]})}const u=e=>h({exampleCode:n=>(0,m.jsxs)(l.A,{groupId:"lang",children:[(0,m.jsx)(d.A,{value:"sol",label:"Solidity",children:(0,m.jsx)(i.A,{language:"solidity",children:e.solidity(n)})}),(0,m.jsx)(d.A,{value:"cw",label:"CosmWasm",children:"\ud83d\udea7 Coming soon! \ud83d\udea7"}),(0,m.jsx)(d.A,{value:"sl",label:"Sealevel",children:"\ud83d\udea7 Coming soon! \ud83d\udea7"})]})})},75686:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>m,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"reference/hooks/overview","title":"\u90ae\u4ef6\u5206\u53d1 Hooks","description":"\u90ae\u4ef6\u5206\u53d1 Hooks \u5141\u8bb8\u5f00\u53d1\u8005\u901a\u8fc7\u90ae\u4ef6\u7bb1\u914d\u7f6e\u9644\u52a0\u7684\u539f\u59cb\u94fe\u884c\u4e3a\uff0c\u4f7f\u7528\u901a\u8fc7\u90ae\u4ef6\u7bb1\u5206\u53d1\u7684\u6d88\u606f\u5185\u5bb9\u3002","source":"@site/docs/reference/hooks/overview.mdx","sourceDirName":"reference/hooks","slug":"/reference/hooks/overview","permalink":"/website/docs/reference/hooks/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/HyperlaneDevCN/website/tree/master/docs/reference/hooks/overview.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"protocolSidebar","previous":{"title":"\u8de8\u94fe Gas \u652f\u4ed8","permalink":"/website/docs/protocol/interchain-gas-payment"},"next":{"title":"\u8de8\u94fe Gas","permalink":"/website/docs/reference/hooks/interchain-gas"}}');var s=a(74848),r=a(28453),o=a(65537),i=a(79329),d=a(72891);const l={},c="\u90ae\u4ef6\u5206\u53d1 Hooks",m={},h=[{value:"\u90ae\u4ef6\u5206\u53d1",id:"\u90ae\u4ef6\u5206\u53d1",level:2},{value:"\u62a5\u4ef7\u5904\u7406\uff08\u8d39\u7528\uff09",id:"\u62a5\u4ef7\u5904\u7406\u8d39\u7528",level:3},{value:"\u91cd\u5199\u9ed8\u8ba4 hook \u5143\u6570\u636e",id:"\u91cd\u5199\u9ed8\u8ba4-hook-\u5143\u6570\u636e",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:4},{value:"\u81ea\u5b9a\u4e49\u94a9\u5b50\u548c\u5143\u6570\u636e",id:"\u81ea\u5b9a\u4e49\u94a9\u5b50\u548c\u5143\u6570\u636e",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b-1",level:3}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",mermaid:"mermaid",p:"p",pre:"pre",...(0,r.R)(),...e.components},{Details:a}=n;return a||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u90ae\u4ef6\u5206\u53d1-hooks",children:"\u90ae\u4ef6\u5206\u53d1 Hooks"})}),"\n",(0,s.jsx)(n.p,{children:"\u90ae\u4ef6\u5206\u53d1 Hooks \u5141\u8bb8\u5f00\u53d1\u8005\u901a\u8fc7\u90ae\u4ef6\u7bb1\u914d\u7f6e\u9644\u52a0\u7684\u539f\u59cb\u94fe\u884c\u4e3a\uff0c\u4f7f\u7528\u901a\u8fc7\u90ae\u4ef6\u7bb1\u5206\u53d1\u7684\u6d88\u606f\u5185\u5bb9\u3002"}),"\n",(0,s.jsx)(n.mermaid,{value:'flowchart TB\n    subgraph Origin\n      Sender\n      M_O[(Mailbox)]\n      Hook[IPostDispatchHook]\n\n      Sender -- "dispatch(..., metadata, hook)<br>{value}" --\x3e M_O\n      M_O -- "postDispatch(message, metadata)<br>{value}" --\x3e Hook\n    end'}),"\n",(0,s.jsx)(n.p,{children:"\u8fd9\u4f7f\u5f97\u5f00\u53d1\u8005\u80fd\u591f\u96c6\u6210\u7b2c\u4e09\u65b9/\u672c\u5730\u6865\u63a5\uff0c\u8fdb\u884c\u989d\u5916\u7684\u94fe\u627f\u8bfa\uff0c\u6216\u8981\u6c42\u81ea\u5b9a\u4e49\u8d39\u7528\uff0c\u540c\u65f6\u4fdd\u6301\u4e00\u81f4\u7684\u5355\u6b21\u8c03\u7528\u90ae\u4ef6\u7bb1\u63a5\u53e3\u3002"}),"\n",(0,s.jsxs)(a,{children:[(0,s.jsxs)("summary",{children:[(0,s.jsx)(n.code,{children:"IPostDispatchHook"})," \u63a5\u53e3"]}),(0,s.jsx)(o.A,{groupId:"lang",children:(0,s.jsx)(i.A,{value:"sol",label:"Solidity",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-solidity",metastring:"file=<rootDir>/node_modules/@hyperlane-xyz/core/contracts/interfaces/hooks/IPostDispatchHook.sol",children:"// SPDX-License-Identifier: MIT OR Apache-2.0\npragma solidity >=0.8.0;\n\n/*@@@@@@@       @@@@@@@@@\n @@@@@@@@@       @@@@@@@@@\n  @@@@@@@@@       @@@@@@@@@\n   @@@@@@@@@       @@@@@@@@@\n    @@@@@@@@@@@@@@@@@@@@@@@@@\n     @@@@@  HYPERLANE  @@@@@@@\n    @@@@@@@@@@@@@@@@@@@@@@@@@\n   @@@@@@@@@       @@@@@@@@@\n  @@@@@@@@@       @@@@@@@@@\n @@@@@@@@@       @@@@@@@@@\n@@@@@@@@@       @@@@@@@@*/\n\ninterface IPostDispatchHook {\n    enum Types {\n        UNUSED,\n        ROUTING,\n        AGGREGATION,\n        MERKLE_TREE,\n        INTERCHAIN_GAS_PAYMASTER,\n        FALLBACK_ROUTING,\n        ID_AUTH_ISM,\n        PAUSABLE,\n        PROTOCOL_FEE,\n        LAYER_ZERO_V1,\n        RATE_LIMITED,\n        ARB_L2_TO_L1,\n        OP_L2_TO_L1\n    }\n\n    /**\n     * @notice Returns an enum that represents the type of hook\n     */\n    function hookType() external view returns (uint8);\n\n    /**\n     * @notice Returns whether the hook supports metadata\n     * @param metadata metadata\n     * @return Whether the hook supports metadata\n     */\n    function supportsMetadata(\n        bytes calldata metadata\n    ) external view returns (bool);\n\n    /**\n     * @notice Post action after a message is dispatched via the Mailbox\n     * @param metadata The metadata required for the hook\n     * @param message The message passed from the Mailbox.dispatch() call\n     */\n    function postDispatch(\n        bytes calldata metadata,\n        bytes calldata message\n    ) external payable;\n\n    /**\n     * @notice Compute the payment required by the postDispatch call\n     * @param metadata The metadata required for the hook\n     * @param message The message passed from the Mailbox.dispatch() call\n     * @return Quoted payment for the postDispatch call\n     */\n    function quoteDispatch(\n        bytes calldata metadata,\n        bytes calldata message\n    ) external view returns (uint256);\n}\n"})})})})]}),"\n",(0,s.jsx)(n.h2,{id:"\u90ae\u4ef6\u5206\u53d1",children:"\u90ae\u4ef6\u5206\u53d1"}),"\n",(0,s.jsxs)(n.p,{children:["\u9664\u4e86\u901a\u8fc7\u90ae\u4ef6\u7bb1\u5206\u53d1\u7684 ",(0,s.jsx)(n.code,{children:"message"}),"\uff0c",(0,s.jsx)(n.code,{children:"postDispatch"})," \u51fd\u6570\u8fd8\u63a5\u6536\u4e00\u4e2a ",(0,s.jsx)(n.code,{children:"metadata"})," \u53c2\u6570\u3002",(0,s.jsx)(n.code,{children:"metadata"})," \u53c2\u6570\u4ece ",(0,s.jsx)(n.code,{children:"dispatch"})," \u8c03\u7528\u4e2d\u4f20\u9012\uff0c\u901a\u8fc7\u90ae\u4ef6\u7bb1\u672a\u88ab\u4fee\u6539\u3002\u8fd9\u5141\u8bb8\u5f00\u53d1\u8005\u4f20\u9012\u4efb\u4f55\u4ed6\u4eec\u5e0c\u671b\u901a\u8fc7\u94a9\u5b50\u4f20\u9012\u7684\u4e0a\u4e0b\u6587\u3002"]}),"\n",(0,s.jsx)(o.A,{groupId:"lang",children:(0,s.jsx)(i.A,{value:"sol",label:"Solidity",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-solidity",metastring:"file=<rootDir>/node_modules/@hyperlane-xyz/core/contracts/interfaces/hooks/IPostDispatchHook.sol#L52-L55",children:"function postDispatch(\n    bytes calldata metadata,\n    bytes calldata message\n) external payable;\n"})})})}),"\n",(0,s.jsxs)(n.p,{children:["\u5982\u679c ",(0,s.jsx)(n.code,{children:"postDispatch"})," \u51fd\u6570\u63a5\u6536\u5230\u7684\u652f\u4ed8\u4e0d\u8db3\uff0c\u53ef\u80fd\u4f1a\u56de\u6eda\u3002"]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["\u540e\u5904\u7406\u94a9\u5b50\u53ef\u80fd\u662f\u53ef\u91cd\u653e\u7684\u3002\u521b\u5efa\u81ea\u5b9a\u4e49\u94a9\u5b50\u7684\u5f00\u53d1\u8005\u5e94\u5b9e\u73b0\u5b89\u5168\u68c0\u67e5\u4ee5\u9632\u6b62\u8fd9\u79cd\u884c\u4e3a\u3002",(0,s.jsx)(n.a,{href:"https://github.com/hyperlane-xyz/hyperlane-monorepo/blob/b69bc23239ecfc8f8a6277bb0f9bc248cffea234/solidity/contracts/hooks/warp-route/RateLimitedHook.sol#L16",children:"\u8fd9\u91cc"})," \u662f\u4e00\u4e2a\u793a\u4f8b\u5b9e\u73b0\u3002"]})}),"\n",(0,s.jsx)(n.h3,{id:"\u62a5\u4ef7\u5904\u7406\u8d39\u7528",children:"\u62a5\u4ef7\u5904\u7406\uff08\u8d39\u7528\uff09"}),"\n",(0,s.jsxs)(n.p,{children:["\u8d39\u7528\u901a\u5e38\u5728 ",(0,s.jsx)(n.code,{children:"postDispatch"})," \u4e2d\u6536\u53d6\uff0c\u4ee5\u8986\u76d6\u8bf8\u5982\u76ee\u6807\u94fe\u4ea4\u6613\u63d0\u4ea4\u548c\u5b89\u5168\u63d0\u4f9b\u7b49\u6210\u672c\u3002\u8981\u83b7\u53d6\u76f8\u5e94 ",(0,s.jsx)(n.code,{children:"postDispatch"})," \u8c03\u7528\u7684\u62a5\u4ef7\uff0c\u53ef\u4ee5\u67e5\u8be2 ",(0,s.jsx)(n.code,{children:"quoteDispatch"})," \u51fd\u6570\u3002"]}),"\n",(0,s.jsx)(o.A,{groupId:"lang",children:(0,s.jsx)(i.A,{value:"sol",label:"Solidity",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-solidity",metastring:"file=<rootDir>/node_modules/@hyperlane-xyz/core/contracts/interfaces/hooks/IPostDispatchHook.sol#L63-L66",children:"function quoteDispatch(\n    bytes calldata metadata,\n    bytes calldata message\n) external view returns (uint256);\n"})})})}),"\n",(0,s.jsxs)(n.p,{children:["\u90ae\u4ef6\u7bb1\u6709\u4e00\u4e2a ",(0,s.jsx)(n.code,{children:"quoteDispatch"})," \u51fd\u6570\uff0c\u8fd4\u56de\u6210\u529f\u6267\u884c ",(0,s.jsx)(n.code,{children:"dispatch"})," \u8c03\u7528\u6240\u9700\u7684\u603b\u8d39\u7528\u3002"]}),"\n",(0,s.jsx)(n.mermaid,{value:'flowchart TB\n    subgraph Origin\n      Sender\n      M_O[(Mailbox)]\n      R_H[RequiredHook]\n      Hook[Hook]\n\n      Sender -- "quoteDispatch(..., metadata, hook)" --\x3e M_O\n      M_O -- "required = quoteDispatch(message, metadata)" --\x3e R_H\n      M_O -- "fee = hook.quoteDispatch(message, metadata)" --\x3e Hook\n      M_O -- "required + fee" --\x3e Sender\n    end'}),"\n",(0,s.jsxs)(n.p,{children:["\u8f6c\u5230\u5b9e\u73b0\u94a9\u5b50\u6307\u5357 ",(0,s.jsx)(n.a,{href:"/website/docs/guides/create-custom-hook-and-ism",children:"\u8fd9\u91cc"})]}),"\n",(0,s.jsx)(n.h3,{id:"\u91cd\u5199\u9ed8\u8ba4-hook-\u5143\u6570\u636e",children:"\u91cd\u5199\u9ed8\u8ba4 hook \u5143\u6570\u636e"}),"\n",(0,s.jsxs)(n.p,{children:["\u8981\u91cd\u5199\u9ed8\u8ba4\u5143\u6570\u636e\uff0c\u6709\u4e00\u4e2a ",(0,s.jsx)(n.code,{children:"dispatch"})," \u91cd\u8f7d\uff0c\u63a5\u53d7\u4e00\u4e2a\u53ef\u9009\u7684 ",(0,s.jsx)(n.code,{children:"metadata"})," \u53c2\u6570\u3002"]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["Hooks \u5f53\u524d\u671f\u671b\u5143\u6570\u636e\u4f7f\u7528 ",(0,s.jsxs)(n.a,{href:"/website/docs/reference/libraries/hookmetadata",children:[(0,s.jsx)(n.code,{children:"StandardHookMetadata"})," \u5e93"]})," \u683c\u5f0f\u5316\u3002"]})}),"\n",(0,s.jsx)(o.A,{groupId:"lang",children:(0,s.jsx)(i.A,{value:"sol",label:"Solidity",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-solidity",metastring:"file=<rootDir>/node_modules/@hyperlane-xyz/core/contracts/interfaces/IMailbox.sol#L71-L76",children:"function dispatch(\n    uint32 destinationDomain,\n    bytes32 recipientAddress,\n    bytes calldata body,\n    bytes calldata defaultHookMetadata\n) external payable returns (bytes32 messageId);\n"})})})}),"\n",(0,s.jsxs)(n.p,{children:["\u81ea\u5b9a\u4e49\u7684 ",(0,s.jsx)(n.code,{children:"metadata"})," \u5c06\u5728\u4f20\u9012\u7ed9\u6240\u9700\u94a9\u5b50\u7684 ",(0,s.jsx)(n.code,{children:"quoteDispatch"})," \u548c ",(0,s.jsx)(n.code,{children:"postDispatch"})," \u51fd\u6570\u4e4b\u524d\uff0c\u4f20\u9012\u7ed9\u9ed8\u8ba4\u94a9\u5b50\u7684 ",(0,s.jsx)(n.code,{children:"postDispatch"})," \u51fd\u6570\u3002"]}),"\n",(0,s.jsx)(n.mermaid,{value:'flowchart LR\n    subgraph Origin Chain\n      Sender\n      M_O[(Mailbox)]\n      R_H[RequiredHook]\n      D_H[DefaultHook]\n      Sender -- "dispatch(..., metadata){value}" --\x3e M_O\n\n      M_O -. "fee = quoteDispatch(...)" .- R_H\n      M_O -- "postDispatch(metadata, ...)<br>{fee}" --\x3e R_H\n      M_O -. "postDispatch(metadata, ...)<br>{value - fee}" ..-> D_H\n    end'}),"\n",(0,s.jsx)(n.h4,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,s.jsxs)(a,{children:[(0,s.jsxs)("summary",{children:[(0,s.jsx)(n.code,{children:"StandardHookMetadata"})," \u5e93"]}),(0,s.jsx)(o.A,{groupId:"lang",children:(0,s.jsx)(i.A,{value:"sol",label:"Solidity",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-solidity",metastring:"file=<rootDir>/node_modules/@hyperlane-xyz/core/contracts/hooks/libs/StandardHookMetadata.sol",children:'// SPDX-License-Identifier: MIT OR Apache-2.0\npragma solidity >=0.8.0;\n\n/*@@@@@@@       @@@@@@@@@\n @@@@@@@@@       @@@@@@@@@\n  @@@@@@@@@       @@@@@@@@@\n   @@@@@@@@@       @@@@@@@@@\n    @@@@@@@@@@@@@@@@@@@@@@@@@\n     @@@@@  HYPERLANE  @@@@@@@\n    @@@@@@@@@@@@@@@@@@@@@@@@@\n   @@@@@@@@@       @@@@@@@@@\n  @@@@@@@@@       @@@@@@@@@\n @@@@@@@@@       @@@@@@@@@\n@@@@@@@@@       @@@@@@@@*/\n\n/**\n * Format of metadata:\n *\n * [0:2] variant\n * [2:34] msg.value\n * [34:66] Gas limit for message (IGP)\n * [66:86] Refund address for message (IGP)\n * [86:] Custom metadata\n */\nlibrary StandardHookMetadata {\n    struct Metadata {\n        uint16 variant;\n        uint256 msgValue;\n        uint256 gasLimit;\n        address refundAddress;\n    }\n\n    uint8 private constant VARIANT_OFFSET = 0;\n    uint8 private constant MSG_VALUE_OFFSET = 2;\n    uint8 private constant GAS_LIMIT_OFFSET = 34;\n    uint8 private constant REFUND_ADDRESS_OFFSET = 66;\n    uint256 private constant MIN_METADATA_LENGTH = 86;\n\n    uint16 public constant VARIANT = 1;\n\n    /**\n     * @notice Returns the variant of the metadata.\n     * @param _metadata ABI encoded standard hook metadata.\n     * @return variant of the metadata as uint8.\n     */\n    function variant(bytes calldata _metadata) internal pure returns (uint16) {\n        if (_metadata.length < VARIANT_OFFSET + 2) return 0;\n        return uint16(bytes2(_metadata[VARIANT_OFFSET:VARIANT_OFFSET + 2]));\n    }\n\n    /**\n     * @notice Returns the specified value for the message.\n     * @param _metadata ABI encoded standard hook metadata.\n     * @param _default Default fallback value.\n     * @return Value for the message as uint256.\n     */\n    function msgValue(\n        bytes calldata _metadata,\n        uint256 _default\n    ) internal pure returns (uint256) {\n        if (_metadata.length < MSG_VALUE_OFFSET + 32) return _default;\n        return\n            uint256(bytes32(_metadata[MSG_VALUE_OFFSET:MSG_VALUE_OFFSET + 32]));\n    }\n\n    /**\n     * @notice Returns the specified gas limit for the message.\n     * @param _metadata ABI encoded standard hook metadata.\n     * @param _default Default fallback gas limit.\n     * @return Gas limit for the message as uint256.\n     */\n    function gasLimit(\n        bytes calldata _metadata,\n        uint256 _default\n    ) internal pure returns (uint256) {\n        if (_metadata.length < GAS_LIMIT_OFFSET + 32) return _default;\n        return\n            uint256(bytes32(_metadata[GAS_LIMIT_OFFSET:GAS_LIMIT_OFFSET + 32]));\n    }\n\n    /**\n     * @notice Returns the specified refund address for the message.\n     * @param _metadata ABI encoded standard hook metadata.\n     * @param _default Default fallback refund address.\n     * @return Refund address for the message as address.\n     */\n    function refundAddress(\n        bytes calldata _metadata,\n        address _default\n    ) internal pure returns (address) {\n        if (_metadata.length < REFUND_ADDRESS_OFFSET + 20) return _default;\n        return\n            address(\n                bytes20(\n                    _metadata[REFUND_ADDRESS_OFFSET:REFUND_ADDRESS_OFFSET + 20]\n                )\n            );\n    }\n\n    /**\n     * @notice Returns any custom metadata.\n     * @param _metadata ABI encoded standard hook metadata.\n     * @return Custom metadata.\n     */\n    function getCustomMetadata(\n        bytes calldata _metadata\n    ) internal pure returns (bytes calldata) {\n        if (_metadata.length < MIN_METADATA_LENGTH) return _metadata[0:0];\n        return _metadata[MIN_METADATA_LENGTH:];\n    }\n\n    /**\n     * @notice Formats the specified gas limit and refund address into standard hook metadata.\n     * @param _msgValue msg.value for the message.\n     * @param _gasLimit Gas limit for the message.\n     * @param _refundAddress Refund address for the message.\n     * @param _customMetadata Additional metadata to include in the standard hook metadata.\n     * @return ABI encoded standard hook metadata.\n     */\n    function formatMetadata(\n        uint256 _msgValue,\n        uint256 _gasLimit,\n        address _refundAddress,\n        bytes memory _customMetadata\n    ) internal pure returns (bytes memory) {\n        return\n            abi.encodePacked(\n                VARIANT,\n                _msgValue,\n                _gasLimit,\n                _refundAddress,\n                _customMetadata\n            );\n    }\n\n    /**\n     * @notice Formats the specified gas limit and refund address into standard hook metadata.\n     * @param _msgValue msg.value for the message.\n     * @return ABI encoded standard hook metadata.\n     */\n    function overrideMsgValue(\n        uint256 _msgValue\n    ) internal view returns (bytes memory) {\n        return formatMetadata(_msgValue, uint256(0), msg.sender, "");\n    }\n\n    /**\n     * @notice Formats the specified gas limit and refund address into standard hook metadata.\n     * @param _gasLimit Gas limit for the message.\n     * @return ABI encoded standard hook metadata.\n     */\n    function overrideGasLimit(\n        uint256 _gasLimit\n    ) internal view returns (bytes memory) {\n        return formatMetadata(uint256(0), _gasLimit, msg.sender, "");\n    }\n\n    /**\n     * @notice Formats the specified refund address into standard hook metadata.\n     * @param _refundAddress Refund address for the message.\n     * @return ABI encoded standard hook metadata.\n     */\n    function overrideRefundAddress(\n        address _refundAddress\n    ) internal pure returns (bytes memory) {\n        return formatMetadata(uint256(0), uint256(0), _refundAddress, "");\n    }\n}\n'})})})})]}),"\n",(0,s.jsx)(d.W,{solidity:({mailbox:e,originChain:n,destinationDomain:a,destinationChain:t,paddedRecipient:s,body:r})=>`// \u4ece ${n} \u53d1\u9001\u6d88\u606f\u5230 ${t} \u6d4b\u8bd5\u63a5\u6536\u8005\nIMailbox mailbox = IMailbox("${e}");\nmailbox.dispatch{value: msg.value}(\n  ${a},\n  "${s}",\n  bytes("${r}"),\n  StandardHookMetadata.overrideGasLimit(200000)\n);\n`}),"\n",(0,s.jsx)(n.h3,{id:"\u81ea\u5b9a\u4e49\u94a9\u5b50\u548c\u5143\u6570\u636e",children:"\u81ea\u5b9a\u4e49\u94a9\u5b50\u548c\u5143\u6570\u636e"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728\u5b9e\u73b0\u4e0a\u8ff0\u63a5\u53e3\u540e\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u5728\u90ae\u4ef6\u7bb1\u4e2d\u4f7f\u7528\u91cd\u8f7d\u7684 ",(0,s.jsx)(n.code,{children:"dispatch"})," \u8c03\u7528\u6765\u91cd\u5199\u9ed8\u8ba4\u94a9\u5b50\u53ca\u5176\u5143\u6570\u636e\uff1a"]}),"\n",(0,s.jsx)(o.A,{groupId:"lang",children:(0,s.jsxs)(i.A,{value:"sol",label:"Solidity",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-solidity",metastring:"file=<rootDir>/node_modules/@hyperlane-xyz/core/contracts/interfaces/IMailbox.sol#L85-L91",children:"function dispatch(\n    uint32 destinationDomain,\n    bytes32 recipientAddress,\n    bytes calldata body,\n    bytes calldata customHookMetadata,\n    IPostDispatchHook customHook\n) external payable returns (bytes32 messageId);\n"})}),(0,s.jsx)(n.h3,{id:"\u793a\u4f8b-1",children:"\u793a\u4f8b"}),(0,s.jsx)(d.W,{solidity:({mailbox:e,merkleTreeHook:n,originChain:a,destinationDomain:t,destinationChain:s,paddedRecipient:r,body:o})=>`// \u4ece ${a} \u53d1\u9001\u6d88\u606f\u5230 ${s} \u6d4b\u8bd5\u63a5\u6536\u8005\nIMailbox mailbox = IMailbox("${e}");\nIPostDispatchHook merkleTree = IPostDispatchHook("${n}");\nmailbox.dispatch(\n  ${t},\n  "${r}",\n  bytes("${o}"),\n  "0x", // \u7a7a\u5143\u6570\u636e\n  merkleTree\n);\n`})]})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);