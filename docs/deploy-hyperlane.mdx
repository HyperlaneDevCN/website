# å¦‚ä½•ä½¿ç”¨Hyperlaneè¿æ¥æ‚¨çš„é“¾

:::info

- æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å°½å¿«å°†Hyperlaneéƒ¨ç½²åˆ°æ‚¨çš„æ–°é“¾ä¸Šè¿›è¡Œæµ‹è¯•ï¼Œè€Œéç”Ÿäº§ç¯å¢ƒã€‚è¿™åŒ…æ‹¬æ ¸å¿ƒé‚®ç®±å’ŒISMåˆçº¦ä»¥åŠæ‚¨æ­£åœ¨æ¡¥æ¥çš„èµ„äº§çš„warpè·¯ç”±åˆçº¦ã€‚
- è¦æŸ¥çœ‹å·²æ”¯æŒçš„é“¾ï¼Œè¯·è®¿é—®[æ³¨å†Œè¡¨](https://github.com/hyperlane-xyz/hyperlane-registry/tree/main/chains)ã€‚
- å¦‚æœæ‚¨éœ€è¦ä»»ä½•å¸®åŠ©ï¼Œè¯·åœ¨Discordä¸Šçš„#developersé¢‘é“è”ç³»æˆ‘ä»¬æˆ–[ä¸æˆ‘ä»¬è”ç³»](https://forms.gle/KyRTaWvo4XNmNvrq6)ã€‚

:::

## å‰ææ¡ä»¶

ä»»ä½•äººéƒ½å¯ä»¥å¼€å§‹è¿™ä¸ªå¿«é€Ÿå…¥é—¨æŒ‡å—ï¼Œåªè¦ä»–ä»¬æ‹¥æœ‰ä»¥ä¸‹å·¥ä»¶å’Œèµ„äº§ï¼š

- ä¸€ä¸ªæ–°çš„ã€è‡ªå®šä¹‰çš„æˆ–é¢„å…ˆå­˜åœ¨çš„ç½‘ç»œï¼ŒåŒ…æ‹¬ä»¥ä¸‹å…ƒæ•°æ®ï¼š
  - é“¾åç§°ï¼Œä¾‹å¦‚`ethereum`
  - é“¾IDï¼Œä¾‹å¦‚`1`
  - RPC URLï¼Œä¾‹å¦‚`https://eth.llamarpc.com`
- éƒ¨ç½²è€…é’±åŒ…/EOAç§é’¥æˆ–åŠ©è®°è¯
  - è¿™ä¸ªEOAåº”è¯¥åœ¨æ‚¨çš„è‡ªå®šä¹‰é“¾å’Œæ‚¨å°†è¦ä¼ é€’æ¶ˆæ¯çš„ä»»ä½•é“¾ä¸Šéƒ½æœ‰èµ„é‡‘
- [Hyperlane CLI](/docs/reference/cli.mdx)

## 1. æ³¨å†Œè¡¨

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰é“¾é…ç½®ï¼Œè¿è¡Œï¼š

```bash
hyperlane registry init
```

æŒ‰ç…§æç¤ºè®¾ç½®æ‚¨çš„é“¾å…ƒæ•°æ®ã€‚è®¾ç½®åŒºå—æˆ–gaså±æ€§æ˜¯å¯é€‰çš„ã€‚

ç°åœ¨ï¼Œåœ¨`$HOME/.hyperlane/chains`ä¸‹ï¼Œæ‚¨å°†æ‰¾åˆ°ä¸€ä¸ªä»¥æ‚¨è‡ªå®šä¹‰é“¾åç§°å‘½åçš„æ–°æ–‡ä»¶å¤¹ï¼Œä»¥åŠè¯¥æ–‡ä»¶å¤¹ä¸­åä¸º`metadata.yaml`çš„æ–‡ä»¶ã€‚

<details> 
  <summary>
    `$HOME/.hyperlane/chains/yourchain/metadata.yaml`ä¸­çš„é…ç½®ç¤ºä¾‹å†…å®¹
  </summary>

```yaml
# yaml-language-server: $schema=../schema.json
# Metadata for your custom chain

blockExplorers:
  - apiUrl: https://explorer.yourchain.com/api
    apiKey: XXXX # helpful to avoid rate limiting on the contract verification API
    family: etherscan #explorer you're using, also supporting routescan or blockscout
    name: Chainscan
    url: https://explorer.yourchain.com
blocks:
  confirmations: 1
  estimateBlockTime: 1
  reorgPeriod: 0
chainId: 171717
displayName: Chain Name
domainId: 171717
isTestnet: true # optional
name: yourchain
nativeToken:
  name: Ether
  symbol: ETH
  decimals: 18
protocol: ethereum
rpcUrls:
  - http: https://hyper-lane-docs.rpc.caldera.xyz/http
```

</details>

## 2. æ ¸å¿ƒ

æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬é…ç½®ã€éƒ¨ç½²å’Œæµ‹è¯•æ‚¨è‡ªå®šä¹‰é“¾çš„æ ¸å¿ƒåˆçº¦ã€‚

### åˆå§‹åŒ–é…ç½®

1. ä»æ‚¨çš„æœ¬åœ°ç¯å¢ƒï¼Œå°†æ‚¨æœ‰èµ„é‡‘çš„éƒ¨ç½²è€…åœ°å€çš„ç§é’¥æˆ–åŠ©è®°è¯è®¾ç½®ä¸º`HYP_KEY`ã€‚ä¾‹å¦‚ï¼š`export HYP_KEY='<YOUR_PRIVATE_KEY>'`
2. ä»åŒä¸€ç»ˆç«¯å®ä¾‹ï¼Œè¿è¡Œï¼š

```bash
hyperlane core init
```

<details>
  <summary>
    éƒ¨ç½²é…ç½®å°†å†™å…¥`./configs/core-config.yaml`
  </summary>

```yaml
# The address that owns and manages the deployed contracts. This account has admin privileges.
owner: "0x16F4898F47c085C41d7Cc6b1dc72B91EA617dcBb"

# The default Interchain Security Module (ISM) configuration.
defaultIsm:
  #`type`: Specifies the type of ISM. Here, it uses a trusted relayer ism.
  type: trustedRelayerIsm
  #`relayer`: The address of the relayer responsible for processing interchain messages.
  relayer: "0x16F4898F47c085C41d7Cc6b1dc72B91EA617dcBb"

defaultHook:
  # A hook configuration that specifies the use of a Merkle Tree.
  type: merkleTreeHook

requiredHook:
  # The owner address responsible for managing the hook configuration.
  owner: "0x16F4898F47c085C41d7Cc6b1dc72B91EA617dcBb"
  # The type of hook. This one applies a protocol fee mechanism.
  type: protocolFee
  # The address that receives the protocol fees.
  beneficiary: "0x16F4898F47c085C41d7Cc6b1dc72B91EA617dcBb"
  # The maximum fee allowed by the protocol, in wei.
  maxProtocolFee: "100000000000000000"
  # The current fee charged by the protocol, set to 0 for testing purposes.
  protocolFee: "0"
```

</details>

### éƒ¨ç½²åˆçº¦

è¦éƒ¨ç½²åˆçº¦ï¼Œè¿è¡Œï¼š

```bash
hyperlane core deploy
```

ä½¿ç”¨ç®­å¤´å’Œå›è½¦ä»ä¸»ç½‘åˆ—è¡¨åº•éƒ¨é€‰æ‹©æ‚¨çš„è‡ªå®šä¹‰é“¾ã€‚æ‰€æœ‰åˆçº¦éƒ¨ç½²éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ã€‚

<details>
  <summary>
    åœ¨`$HOME/.hyperlane/chains`ä¸‹ï¼Œæ‚¨å°†æ‰¾åˆ°ä¸€ä¸ªä»¥æ‚¨è‡ªå®šä¹‰é“¾åç§°å‘½åçš„æ–°æ–‡ä»¶å¤¹ï¼Œä»¥åŠè¯¥æ–‡ä»¶å¤¹ä¸­åä¸º`addresses.yaml`çš„æ–‡ä»¶
  </summary>

```yaml
staticMerkleRootMultisigIsmFactory: "0x6906cb4741d3E2322E9f9aA645DfC8AB6F122c47"
staticMessageIdMultisigIsmFactory: "0x3CE97a32d9C8294691cBd2baC09B078EDa75c429"
staticAggregationIsmFactory: "0x81f969fDBF48278Ce09685Ce48e03388B6785aF4"
staticAggregationHookFactory: "0x3d864A3c25F61E3c3A7d02e980453A6E1f0a92A6"
domainRoutingIsmFactory: "0xC4c01f7B03f0fFa77A0265C600dEF7Ad28BCa5A2"
proxyAdmin: "0xABb7175d5F123172E7B7Fa467CC9fE4C2FEdb942"
mailbox: "0x5F58d75A9caDE4e2b191313223978dF049f93b81"
interchainAccountRouter: "0x43c0745b0dE9Cb780816a24ddE63d79Ca99B5dE8"
interchainAccountIsm: "0x9C96dC8f4257413225d6B5C47d1afbafc39B269F"
validatorAnnounce: "0xE3bd39BF92DB385dE6313D6070b035bD934378CB"
testRecipient: "0xa58462b1943Be1469Ed58db690C78583BA34Fd2E"
```

</details>

:::warning

`eth_getStorageAt()` å…¼å®¹æ€§ï¼šæŸäº›é“¾å¯èƒ½ä¸ä½¿ç”¨[`eth_getStorageAt()`](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getstorageat) APIã€‚å¦‚æœæ‚¨çš„éƒ¨ç½²é‡åˆ°ç›¸å…³é—®é¢˜ï¼Œè¯·å‚é˜…[æ•…éšœæ’é™¤æŒ‡å—](./deploy-hyperlane-troubleshooting#eth_getstorageat-compatibility)ã€‚

:::

### å‘é€æµ‹è¯•æ¶ˆæ¯

è¦å‘é€æµ‹è¯•æ¶ˆæ¯ï¼Œè¿è¡Œï¼š

```bash
hyperlane send message --relay
```

`--relay`æ ‡å¿—æ˜¯å¯é€‰çš„ï¼Œå®ƒå°†æ¶ˆæ¯ä¼ é€’åˆ°ç›®æ ‡é“¾ã€‚

æ‚¨ä¹Ÿå¯ä»¥åœ¨åå°è¿è¡Œä¸­ç»§å™¨ï¼š

```bash
hyperlane relayer --chains yourchain,sepolia
```

:::success
**ğŸ‰ æ­å–œï¼æ‚¨å·²æˆåŠŸå‘æ‚¨çš„è‡ªå®šä¹‰é“¾å‘é€äº†æ¶ˆæ¯**
:::

## 3. Warpè·¯ç”±

ç°åœ¨æ‚¨çš„é“¾ä¸Šå·²ç»æœ‰äº†Hyperlaneé‚®ç®±å’Œæ ¸å¿ƒåˆçº¦ï¼Œæ˜¯æ—¶å€™åœ¨æ‚¨çš„é“¾å’Œä»»ä½•å…¶ä»–Hyperlaneé“¾ä¹‹é—´è®¾ç½®ä»£å¸æ¡¥æ¥äº†ã€‚

ç»§ç»­æŸ¥çœ‹[éƒ¨ç½²Warpè·¯ç”±](/docs/guides/deploy-warp-route.mdx)æ–‡æ¡£äº†è§£æ›´å¤šè¯¦æƒ…ã€‚

## 4. æäº¤åˆ°æ³¨å†Œè¡¨

å¦‚æœæ‚¨å¸Œæœ›å…¶ä»–é“¾ä¹Ÿèƒ½ä¸æ‚¨è¿æ¥ï¼Œå¹¶å°†å…¶æŠ•å…¥ç”Ÿäº§ï¼Œè¯·æäº¤æ³¨å†Œè¡¨PRã€‚

### ç¡®ä¿ä¿¡æ¯å®Œæ•´

ç¡®ä¿æ‚¨çš„å…ƒæ•°æ®å®Œæ•´ï¼š

- åœ¨æ–‡ä»¶å¤¹å†…æ·»åŠ `logo.svg`æ–‡ä»¶
- åŒ…å«æ ‡è¯†éƒ¨ç½²å›¢é˜Ÿçš„`Deployer`ä¿¡æ¯
- å¦‚æœé“¾æ˜¯æµ‹è¯•ç½‘ï¼Œè¯·æŒ‡æ˜`isTestnet` `true`
- å¦‚æœæ‚¨æœ‰gnosis safeæœåŠ¡ï¼Œè¯·æ·»åŠ api url `gnosisSafeTransactionServiceUrl`
- å¯¹yamlæ–‡ä»¶è¿›è¡Œlintå¤„ç†å¹¶æŒ‰å­—æ¯é¡ºåºæ’åº

### æäº¤åˆ°GitHub

é¦–å…ˆï¼Œå¯¼èˆªåˆ°æ‚¨çš„æ³¨å†Œè¡¨æœ¬åœ°å®ä¾‹å¹¶æäº¤æ›´æ”¹

```bash
cd ~/.hyperlane && git init && git add . && git commit
```

ç„¶åï¼Œå°†æœ¬åœ°æ³¨å†Œè¡¨ä¸è§„èŒƒæ³¨å†Œè¡¨åŒæ­¥

```bash
git remote add canonical git@github.com:hyperlane-xyz/hyperlane-registry.git
git pull canonical main --rebase
```

æœ€åï¼Œå°†æœ¬åœ°æ³¨å†Œè¡¨æ¨é€åˆ°github forkå¹¶æäº¤PRã€‚è¯·åœ¨æ‚¨çš„PRä¸­åŒ…å«ä¸€ä¸ª[changeset](https://github.com/changesets/changesets/blob/main/docs/adding-a-changeset.md)ã€‚

:::success
**æ­å–œï¼æ‚¨å·²æˆåŠŸå°†Hyperlaneéƒ¨ç½²åˆ°æ‚¨çš„é“¾ä¸Šå¹¶å°†æ‚¨çš„å·¥ä½œæ·»åŠ åˆ°Hyperlaneæ³¨å†Œè¡¨**

æ„Ÿè°¢æ‚¨ä¸ºæ— éœ€è®¸å¯çš„äº’æ“ä½œæ€§æœªæ¥åšå‡ºè´¡çŒ® ğŸ«¡
:::

### æŠ•å…¥ç”Ÿäº§

#### ç¤¾åŒºè¿è¡Œçš„åŸºç¡€è®¾æ–½

ä½œä¸ºå…¬å…±äº§å“ï¼ŒHyperlaneçš„æ ¸å¿ƒå¼€å‘å›¢é˜Ÿ - Abacus Works - å¯ä»¥å…è´¹å¸®åŠ©æ‚¨çš„ä¸»ç½‘é“¾æŠ•å…¥ç”Ÿäº§ã€‚è¯·åœ¨æ‚¨çš„PRä¸­æå‡ºæ­¤è¯·æ±‚ï¼Œæ¯ä¸¤å‘¨æ·»åŠ ä¸€æ‰¹æ–°é“¾ã€‚

è¿™åŒ…æ‹¬è¿è¡Œè¿æ¥æ‚¨çš„é“¾åˆ°ç½‘ç»œçš„ä¸­ç»§å™¨ï¼Œå°†æ‚¨çš„é“¾æ·»åŠ åˆ°[Explorer](https://explorer.hyperlane.xyz/)ï¼Œä»¥åŠåœ¨æ‚¨é“¾çš„é»˜è®¤éªŒè¯å™¨é›†ä¸­è¿è¡Œä¸€ä¸ªéªŒè¯å™¨ã€‚æ²¡æœ‰æŒç»­çš„æˆæœ¬æˆ–é”å®š - æ‚¨å¯ä»¥éšæ—¶é€‰æ‹©å°†ä¸­ç»§å™¨è¿ç§»åˆ°è‡ªæ‰˜ç®¡é€‰é¡¹æˆ–æ›´æ”¹éªŒè¯å™¨é›†ã€‚

#### è‡ªæ‰˜ç®¡åŸºç¡€è®¾æ–½

å…·æœ‰devopsç»éªŒçš„é“¾ï¼Œå¦‚Strideï¼Œé€‰æ‹©è¿è¡Œè‡ªå·±çš„ä¸­ç»§å™¨ã€‚è™½ç„¶è¿™ç¡®å®æœ‰ä¸€äº›è¿è¥è´Ÿæ‹…ï¼Œä½†è¿™å…è®¸ä»–ä»¬æŒ‰ç…§è‡ªå·±çš„èŠ‚å¥æ›´å¿«åœ°æ·»åŠ æ–°é“¾ã€‚æ­¤å¤–ï¼Œä»–ä»¬å¯ä»¥é€‰æ‹©è®¾ç½®æˆ–è¡¥è´´ä¸ä¸­ç»§ç›¸å…³çš„é“¾é—´gasæˆæœ¬ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[è¿è¥](/docs/operate/relayer/run-relayer.mdx)æ–‡æ¡£ã€‚
