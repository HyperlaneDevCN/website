# Warp Routes: é€šè¿‡è‡ªå®šä¹‰ç‡ƒæ°”ä»£å¸å®ç°å¿«é€Ÿæœ¬åœ°è½¬è´¦

æœ¬æ–‡å°†æŒ‡å¯¼æ‚¨å¦‚ä½•ä½¿ç”¨ Hyperlane å¯ç”¨é€šè¿‡è‡ªå®šä¹‰ç‡ƒæ°”ä»£å¸è¿›è¡Œå¿«é€Ÿæœ¬åœ°è½¬è´¦åˆ°æ‚¨çš„ L2 ç½‘ç»œã€‚

## ä¸»è¦åŠ¨æœº

1. åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ç‡ƒæ°”ä»£å¸ï¼Œä»¥ä¾¿åœ¨æ‚¨é€‰æ‹©çš„ L2 ä¸Šä½¿ç”¨ã€‚
2. ä½¿ç”¨è¯¥ç‡ƒæ°”ä»£å¸å®ç°å¿«é€Ÿæœ¬åœ°è½¬è´¦ï¼Œè€Œä¸æ˜¯é€šè¿‡è§„èŒƒæ¡¥æ¥è¿›è¡Œé•¿æ—¶é—´çš„ç»“ç®—ç­‰å¾…ã€‚

## å‰ææ¡ä»¶

è¦å®Œæˆä»¥ä¸‹æ“ä½œæŒ‡å—ï¼Œæ‚¨éœ€è¦å…·å¤‡ä»¥ä¸‹æ¡ä»¶ï¼š

1. ä¸€ä¸ª L2 ç½‘ç»œï¼ˆ"yourchain"ï¼‰ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸ŠæŒ‡å®šä¸€ä¸ª [è‡ªå®šä¹‰ç‡ƒæ°”ä»£å¸](https://docs.arbitrum.io/launch-orbit-chain/how-tos/use-a-custom-gas-token)ï¼Œå¹¶å¸Œæœ›å¯ç”¨å¿«é€Ÿæœ¬åœ°è½¬è´¦ã€‚
2. ä¸€ä¸ªå”¯ä¸€çš„éƒ¨ç½²è€…æˆ–æˆæƒæ‰€æœ‰è€…ï¼Œä»¥æ¥æ”¶æ”¶æ®ä»£å¸çš„é“¸é€ ï¼ˆæœ‰å…³è¯¥ä»£å¸çš„æ›´å¤šä¿¡æ¯è§ä¸‹æ–‡ï¼‰ã€‚
3. å®‰è£…äº† [Hyperlane CLI](https://docs.hyperlane.xyz/docs/reference/cli) çš„å®ä¾‹ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªä½œä¸º `HYP_KEY` çš„é’±åŒ…ç§é’¥ï¼Œå·²åœ¨æ‰€æœ‰ç›¸å…³ç½‘ç»œä¸Šè·å¾—èµ„é‡‘ã€‚

## æ“ä½œæŒ‡å—ï¼šå¿«é€Ÿæœ¬åœ°è½¬è´¦

:::info

- è¯·æ³¨æ„ï¼Œä¸‹é¢æåˆ°çš„"æ”¶æ®ä»£å¸"æ˜¯ä¸€ä¸ªï¼ˆä¸€æ¬¡æ€§ï¼‰å¯é“¸é€ çš„"è™šæ‹Ÿ"ä»£å¸ï¼Œç”¨äºæŠµæŠ¼æ‚¨é“¾ä¸Šå¯¹åº” L1 çš„ä¼ è¾“è·¯çº¿ã€‚åˆ›å»ºåï¼Œæ‚¨å°†é”€æ¯è¯¥ä»£å¸çš„é“¸é€ æƒã€‚
- æ­¤å¤–ï¼Œæ ¹æ®æ‚¨çš„ L2ï¼Œæ‚¨è‡ªå®šä¹‰ç‡ƒæ°”ä»£å¸çš„ä»£å¸ç¬¦å·å¯èƒ½ä¸æ‚¨çš„æ”¶æ®ä»£å¸ç›¸åŒã€‚å¦‚æœåœ¨ä»¥å¤ªåŠä¸Šéƒ¨ç½²ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å°†ç¬¦å·è®¾ç½®ä¸º `ETH`ã€‚

:::

### 1) éƒ¨ç½²æ”¶æ®ä»£å¸

åœ¨ä»¥å¤ªåŠä¸Šéƒ¨ç½²ä¸€ä¸ª `ETH` æ”¶æ®ä»£å¸ï¼Œä»¥æˆä¸ºæ‚¨ L2 çš„è‡ªå®šä¹‰ç‡ƒæ°”ä»£å¸ã€‚

1. ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥é€šè¿‡ [Remix](https://remix.ethereum.org/) ä½¿ç”¨ä¸€ä¸ªæœ‰èµ„é‡‘çš„é’±åŒ…å’Œç±»ä¼¼ä¸‹é¢çš„åˆçº¦æ¥éƒ¨ç½²æ‚¨çš„æ”¶æ®ä»£å¸ï¼š

   ```solidity
   // SPDX-License-Identifier: MIT
   pragma solidity ^0.8.20;

   import "@openzeppelin/contracts/token/ERC20/ERC20.sol";

   contract YourchainETH is ERC20 {
       constructor() ERC20("YourchainETH", "ETH") {
           _mint(msg.sender, 10000000 * (10 ** 18));
       }
   }
   ```

2. ç¡®ä¿æ‚¨ `ETH` æ”¶æ®ä»£å¸çš„æ€»ä¾›åº”é‡ 100% é“¸é€ ç»™éƒ¨ç½²è€…æˆ–æˆæƒåœ°å€ã€‚è¿™å¿…é¡»æ˜¯ä¸€æ¬¡æ€§é“¸é€ äº‹ä»¶ï¼Œä»¥é¿å…ä»¥å¤ªåŠ â†” yourchain æœ¬åœ°ä¼ è¾“è·¯çº¿çš„ä»·å€¼ç¨€é‡Šã€‚
3. éƒ¨ç½²åï¼Œä¿å­˜åˆçº¦åœ°å€ä»¥ä¾›åç»­ä½¿ç”¨ã€‚

### 2) è®¾ç½®è‡ªå®šä¹‰ Gas Token

å°† yourchain çš„è‡ªå®šä¹‰ç‡ƒæ°”ä»£å¸è®¾ç½®ä¸ºæ–°éƒ¨ç½²çš„ `ETH` ERC20 æ”¶æ®ä»£å¸ã€‚

1. ä½¿ç”¨ OP å †æ ˆè®¾ç½®è‡ªå®šä¹‰ç‡ƒæ°”ä»£å¸ï¼š https://docs.optimism.io/builders/chain-operators/features/custom-gas-token
2. ä½¿ç”¨ Arbitrum Orbit è®¾ç½®è‡ªå®šä¹‰ç‡ƒæ°”ä»£å¸ï¼š https://docs.arbitrum.io/launch-orbit-chain/how-tos/use-a-custom-gas-token

### 3) è½¬ç§»æ‰€æœ‰æ”¶æ®ä»£å¸

ä½¿ç”¨æ‚¨ L2 çš„è§„èŒƒæ¡¥å°† 100% çš„ `ETH` æ”¶æ®ä»£å¸ä»ä»¥å¤ªåŠè½¬ç§»åˆ° yourchainã€‚

1. ä½¿ç”¨ OP å †æ ˆæ ‡å‡†æ¡¥è¿›è¡Œè½¬ç§»ï¼š https://docs.optimism.io/builders/app-developers/bridging/standard-bridge
2. ä½¿ç”¨ Arbitrum Orbit æ¡¥è¿›è¡Œè½¬ç§»ï¼š https://docs.arbitrum.io/launch-orbit-chain/how-tos/add-orbit-chain-to-bridge-ui

### 4) éƒ¨ç½²æœ¬åœ°ä¼ è¾“è·¯çº¿

ä½¿ç”¨ Hyperlane CLIï¼Œéƒ¨ç½²ä»¥å¤ªåŠ `ETH` EvmHypNative â†” yourchain `ETH` EvmHypNative ä¼ è¾“è·¯çº¿ï¼š

1. è¿è¡Œ `hyperlane warp init` å¹¶å®Œæˆä»¥ä¸‹æµç¨‹ï¼š
   1. ä½¿ç”¨ç©ºæ ¼é€‰æ‹© `ethereum` å’Œ `yourchain`ï¼Œç„¶åæŒ‰å›è½¦ã€‚
   2. å¯¹äºä»¥å¤ªåŠï¼Œé€‰æ‹© `native` å¹¶æ¥å—é‚®ç®±ã€‚
   3. å¯¹äº yourchainï¼Œé€‰æ‹© `native` å¹¶æ¥å—é‚®ç®±ã€‚
2. åœ¨æ‰§è¡Œéƒ¨ç½²ä¹‹å‰ï¼Œç¡®ä¿ yourchain çš„ `metadata.yaml` ä¸­å®šä¹‰äº† `blockExplorers` å­—æ®µã€‚è¿™å°†ç”¨äºåˆçº¦éªŒè¯ï¼Œä»¥ä¾¿è½»æ¾æŠµæŠ¼ yourchain çš„ä¼ è¾“è·¯çº¿ã€‚
3. è¿è¡Œ `hyperlane warp deploy` å¹¶ç¡®è®¤ä¼ è¾“éƒ¨ç½²é…ç½®ç¬¦åˆé¢„æœŸã€‚
4. æ‰§è¡Œåï¼Œæ‚¨çš„ `yourchain-ethereum-config.yaml` éƒ¨ç½²æ–‡ä»¶å°†ç±»ä¼¼äºä»¥ä¸‹å†…å®¹ï¼š

   ```solidity
   # yaml-language-server: $schema=../schema.json
   tokens:
     - addressOrDenom: "0x3e5bB1a03fef5DB15A320885E6A0C8Bff8b656bd"
       chainName: yourchain
       connections:
         - token: ethereum|ethereum|0x6d64832bDB4F04721D4F23CCbF17326cb636101e
       decimals: 18
       name: Ether
       standard: EvmHypNative
       symbol: ETH
     - addressOrDenom: "0x6d64832bDB4F04721D4F23CCbF17326cb636101e"
       chainName: ethereum
       connections:
         - token: ethereum|yourchain|0x3e5bB1a03fef5DB15A320885E6A0C8Bff8b656bd
       decimals: 18
       name: Ether
       standard: EvmHypNative
       symbol: ETH

   ```

### 5) æŠµæŠ¼æ‚¨çš„ä¼ è¾“è·¯çº¿

é€šè¿‡ `receive()` å‡½æ•°å°† yourchain çš„ `ETH` ä½œä¸ºæŠµæŠ¼å­˜å…¥ yourchain çš„æœ¬åœ°ä¼ è¾“è·¯çº¿ã€‚å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ‰«æä»ªçš„ UI æˆ–åƒ Metamask è¿™æ ·çš„é’±åŒ…ä½¿ç”¨å·²éªŒè¯çš„åˆçº¦æ¥å®Œæˆæ­¤æ“ä½œã€‚

è¿™å°†æŠµæŠ¼æœ¬åœ°ä¼ è¾“è·¯çº¿ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿå¿«é€Ÿæ¡¥æ¥ä»–ä»¬çš„æœ¬åœ°èµ„äº§åˆ° yourchain å’Œä» yourchainã€‚

### 6) æµ‹è¯•

æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å‘èµ·ä¸€æ¬¡å•ä¸ª wei çš„æµ‹è¯•è½¬è´¦ï¼š

```bash
hyperlane warp send --relay --symbol ETH
```

`--relay` æ ‡å¿—æ˜¯å¯é€‰çš„ï¼Œå°†æ¶ˆæ¯ ä¸­ç»§ åˆ°ç›®æ ‡é“¾ã€‚

æ‚¨è¿˜å¯ä»¥åœ¨åå°è¿è¡Œä¸€ä¸ªä»…ä¸ºæ‚¨çš„ä¼ è¾“è·¯çº¿æä¾›æœåŠ¡çš„ä¸­ç»§å™¨ï¼š

```bash
hyperlane relayer --symbol TOKEN
```

æ‚¨å¯ä»¥åœ¨è®¾ç½®äº†ä¼ è¾“è·¯çº¿çš„ä»»ä¸€æ–¹å‘è¿›è¡Œæµ‹è¯•ã€‚

:::info
é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‚¨çš„ä¼ è¾“æ ¸å¿ƒé…ç½®ä½äºæœ¬åœ°æ³¨å†Œè¡¨ `$HOME/.hyperlane/deployments/warp_routes` ä¸­ï¼Œå¯ä¸ `--warp` æ ‡å¿—ä¸€èµ·ä½¿ç”¨ã€‚
:::

:::success
ğŸ‰ æ­å–œï¼æ‚¨ç°åœ¨å·²é€šè¿‡è‡ªå®šä¹‰ç‡ƒæ°”ä»£å¸åœ¨æ‚¨çš„ L2 ä¸Šå¯ç”¨å¿«é€Ÿæœ¬åœ°è½¬è´¦ã€‚
:::

```mermaid
sequenceDiagram
		box ethereum L1
	    participant ycETH as ETH (ERC20)
			participant ETH as ETH (Native)
    end
		box yourchain L2
	    participant yETH as ETH (Native)
    end

    Note over yETH: 1) set custom gas<br>token to ycETH
    ycETH-->>yETH: 2) transfer 100%<br>of receipt token
    yETH-->>yETH: 3) deposit native<br>as collateral
    yETH-->ETH: <- fast ETH transfer ->
```

:::warning
è¯·æ³¨æ„ï¼Œæ­¤æŠµæŠ¼ç­–ç•¥æ‰¿æ‹…æŸäº› ISM ä¿¡ä»»å‡è®¾ã€‚
:::

## èµ„æº

è¯·æŸ¥çœ‹ [inEVM æ¡¥](https://bridge.inevm.com/) ä»¥æŸ¥çœ‹è¿™äº›ä¼ è¾“è·¯çº¿çš„å®é™…ç¤ºä¾‹ã€‚

æŸ¥çœ‹ Hyperlane æ”¯æŒå›¢é˜Ÿå’Œ Injective å‘å¸ƒçš„ä¸€äº›é¢å¤–ä¿¡æ¯ï¼š

- [inEVM èšç„¦ï¼šHyperlane](https://blog.injective.com/en/inevm-spotlight-hyperlane-2/)
- [è¿æ¥ Injectiveï¼šHyperlane å¼€å¯ inEVM æ¡¥](https://medium.com/hyperlane/connecting-injective-hyperlane-opens-the-inevm-bridge-6f1d3edf0ff8)
- [Hyperlane å’Œ Injective | æ‰©å±•æœºä¼š](https://medium.com/@kobriyyu/hyperlane-and-injective-expanding-opportunities-8ce170b72da7)
